<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrainSAIT Healthcare SDK - Interactive Demo</title>
    <meta name="description" content="Advanced Healthcare SDK for Saudi Arabia - Interactive Demo with FHIR R4, NPHIES, AI Agents">
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Cairo', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .header {
            position: fixed; top: 0; width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 1000; padding: 1rem 2rem;
        }

        .nav {
            display: flex; justify-content: space-between;
            align-items: center; max-width: 1200px; margin: 0 auto;
        }

        .logo { font-size: 1.5rem; font-weight: 700; color: white; text-decoration: none; }
        
        .nav-links { display: flex; gap: 2rem; list-style: none; }
        .nav-links a { color: white; text-decoration: none; transition: opacity 0.3s; }
        .nav-links a:hover { opacity: 0.8; }

        .main-content { margin-top: 80px; padding: 2rem; }

        .hero {
            text-align: center; padding: 4rem 2rem;
            max-width: 1200px; margin: 0 auto;
        }

        .hero h1 {
            font-size: 3.5rem; font-weight: 700; margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero .subtitle { font-size: 1.3rem; opacity: 0.9; margin-bottom: 3rem; }

        .btn {
            display: inline-block; padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.2); color: white;
            text-decoration: none; border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease; cursor: pointer;
            font-family: inherit; font-size: 1rem; margin: 0.25rem;
        }

        .btn:hover { background: rgba(255, 255, 255, 0.3); transform: translateY(-2px); }
        .btn-primary { background: linear-gradient(45deg, #667eea, #764ba2); border: none; }
        .btn-success { background: linear-gradient(45deg, #11998e, #38ef7d); border: none; }
        .btn-warning { background: linear-gradient(45deg, #f093fb, #f5576c); border: none; }

        .demo-section { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        .section-title { font-size: 2.5rem; text-align: center; margin-bottom: 3rem; font-weight: 600; }

        .stats-section {
            text-align: center; padding: 3rem 0;
            background: rgba(255, 255, 255, 0.05);
            margin: 3rem 0; border-radius: 20px;
        }

        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem; max-width: 800px; margin: 0 auto;
        }

        .stat-item { padding: 1rem; }
        .stat-number { font-size: 2.5rem; font-weight: 700; color: #11998e; }
        .stat-label { opacity: 0.8; margin-top: 0.5rem; }

        .tab-container { margin-top: 2rem; }
        .tab-buttons {
            display: flex; justify-content: center; gap: 1rem;
            margin-bottom: 2rem; flex-wrap: wrap;
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px; color: white; cursor: pointer;
            transition: all 0.3s;
        }

        .tab-button.active { background: rgba(255, 255, 255, 0.3); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .interactive-demo {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px); border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 2rem; margin: 2rem 0;
        }

        .demo-output {
            background: rgba(0, 0, 0, 0.3); border-radius: 10px;
            padding: 1rem; margin-top: 1rem;
            font-family: 'Courier New', monospace;
            max-height: 300px; overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .loading { display: none; text-align: center; padding: 1rem; }
        .spinner {
            display: inline-block; width: 20px; height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%; border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem; margin: 3rem 0;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px); border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1.5rem; text-align: center;
            transition: transform 0.3s;
        }

        .feature-card:hover { transform: translateY(-3px); }
        .feature-icon { font-size: 3rem; margin-bottom: 1rem; opacity: 0.9; }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem; margin-bottom: 4rem;
        }

        .demo-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px); border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 2rem; transition: transform 0.3s, box-shadow 0.3s;
        }

        .demo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.2);
        }

        .footer {
            text-align: center; padding: 3rem 2rem;
            background: rgba(0, 0, 0, 0.2); margin-top: 4rem;
        }

        .version-info {
            display: flex; justify-content: center; gap: 2rem;
            margin-top: 2rem; flex-wrap: wrap;
        }

        .version-badge {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem; border-radius: 20px;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            .nav-links { display: none; }
            .demo-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <a href="#" class="logo">üß† BrainSAIT Healthcare SDK</a>
            <ul class="nav-links">
                <li><a href="#demo">Demo</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#api">API</a></li>
                <li><a href="https://github.com/Fadil369/sdk" target="_blank">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <main class="main-content">
        <section class="hero">
            <h1>üè• Advanced Healthcare SDK</h1>
            <p class="subtitle">
                Complete FHIR R4 & NPHIES Integration for Saudi Arabia's Vision 2030 Healthcare Transformation
            </p>
            <div>
                <a href="#demo" class="btn btn-primary">üöÄ Try Interactive Demo</a>
                <a href="#features" class="btn btn-success">üìã Explore Features</a>
                <a href="https://github.com/Fadil369/sdk" class="btn btn-warning" target="_blank">üíª View Source</a>
            </div>
        </section>

        <section class="stats-section">
            <h2 class="section-title">Production Ready Metrics</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number">99.9%</div>
                    <div class="stat-label">Uptime</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">&lt;200ms</div>
                    <div class="stat-label">API Response</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">HIPAA</div>
                    <div class="stat-label">Compliant</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">24/7</div>
                    <div class="stat-label">Edge Computing</div>
                </div>
            </div>
        </section>

        <section id="demo" class="demo-section">
            <h2 class="section-title">üéÆ Interactive Demo</h2>
            
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-button active" onclick="showTab('api-demo')">üîå API Testing</button>
                    <button class="tab-button" onclick="showTab('fhir-demo')">üè• FHIR Integration</button>
                    <button class="tab-button" onclick="showTab('ai-demo')">ü§ñ AI Agents</button>
                    <button class="tab-button" onclick="showTab('database-demo')">üíæ Database</button>
                </div>

                <div id="api-demo" class="tab-content active">
                    <div class="interactive-demo">
                        <h3><i class="fas fa-plug"></i> SDK API Testing</h3>
                        <p>Test the core SDK functionality and API endpoints:</p>
                        <div>
                            <button class="btn btn-primary" onclick="testSDKHealth()">üè• Health Check</button>
                            <button class="btn btn-success" onclick="testSDKConfig()">‚öôÔ∏è Get Configuration</button>
                            <button class="btn btn-warning" onclick="testSDKMetrics()">üìä Performance Metrics</button>
                        </div>
                        <div class="loading" id="api-loading">
                            <div class="spinner"></div> Testing API...
                        </div>
                        <div class="demo-output" id="api-output"></div>
                    </div>
                </div>

                <div id="fhir-demo" class="tab-content">
                    <div class="interactive-demo">
                        <h3><i class="fas fa-hospital"></i> FHIR R4 Integration</h3>
                        <p>Demonstrate FHIR resource handling with Saudi extensions:</p>
                        <div>
                            <button class="btn btn-primary" onclick="testFHIRPatient()">üë§ Create Saudi Patient</button>
                            <button class="btn btn-success" onclick="testFHIRValidation()">‚úÖ Validate Resource</button>
                            <button class="btn btn-warning" onclick="testFHIRBundle()">üì¶ Transaction Bundle</button>
                        </div>
                        <div class="loading" id="fhir-loading">
                            <div class="spinner"></div> Processing FHIR...
                        </div>
                        <div class="demo-output" id="fhir-output"></div>
                    </div>
                </div>

                <div id="ai-demo" class="tab-content">
                    <div class="interactive-demo">
                        <h3><i class="fas fa-robot"></i> AI Healthcare Agents</h3>
                        <p>Interact with MASTERLINC and HEALTHCARELINC AI agents:</p>
                        <div>
                            <button class="btn btn-primary" onclick="testMasterLinc()">üß† MASTERLINC Analysis</button>
                            <button class="btn btn-success" onclick="testHealthcareLinc()">üè• HEALTHCARELINC Insights</button>
                            <button class="btn btn-warning" onclick="testVision2030()">üá∏üá¶ Vision 2030 Metrics</button>
                        </div>
                        <div class="loading" id="ai-loading">
                            <div class="spinner"></div> AI Processing...
                        </div>
                        <div class="demo-output" id="ai-output"></div>
                    </div>
                </div>

                <div id="database-demo" class="tab-content">
                    <div class="interactive-demo">
                        <h3><i class="fas fa-database"></i> MongoDB Atlas Integration</h3>
                        <p>Test database operations and healthcare data management:</p>
                        <div>
                            <button class="btn btn-primary" onclick="testDatabaseHealth()">üíä Database Health</button>
                            <button class="btn btn-success" onclick="testHospitals()">üè• List Hospitals</button>
                            <button class="btn btn-warning" onclick="testAIModels()">ü§ñ AI Model Registry</button>
                        </div>
                        <div class="loading" id="db-loading">
                            <div class="spinner"></div> Querying Database...
                        </div>
                        <div class="demo-output" id="db-output"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" class="demo-section">
            <h2 class="section-title">üöÄ Core Features</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üîí</div>
                    <h3>HIPAA Compliance</h3>
                    <p>Full healthcare data protection with encryption, audit trails, and privacy controls</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üè•</div>
                    <h3>FHIR R4 Integration</h3>
                    <p>Complete FHIR implementation with Saudi Arabia specific extensions and validations</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üá∏üá¶</div>
                    <h3>NPHIES Integration</h3>
                    <p>Direct integration with Saudi National Health Insurance portal for claims processing</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <h3>AI Healthcare Agents</h3>
                    <p>MASTERLINC and HEALTHCARELINC for intelligent healthcare analytics and insights</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üåê</div>
                    <h3>Arabic & RTL Support</h3>
                    <p>Full internationalization with Arabic language support and right-to-left layouts</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3>Edge Computing</h3>
                    <p>Cloudflare Workers for global edge deployment with sub-200ms response times</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>Vision 2030 Metrics</h3>
                    <p>Built-in tracking for Saudi Arabia's healthcare transformation initiatives</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üíé</div>
                    <h3>Glass Morphism UI</h3>
                    <p>Modern, accessible user interface with glass morphism design principles</p>
                </div>
            </div>
        </section>

        <section id="api" class="demo-section">
            <h2 class="section-title">üì° API Endpoints</h2>
            <div class="demo-grid">
                <div class="demo-card">
                    <h3><i class="fas fa-heartbeat"></i> Health Monitoring</h3>
                    <p>System health checks and performance monitoring</p>
                    <code style="background: rgba(0,0,0,0.3); padding: 0.5rem; border-radius: 5px; display: block; margin: 1rem 0;">
                        GET /health<br>
                        GET /api/config<br>
                        GET /api/metrics
                    </code>
                    <button class="btn btn-primary" onclick="showAPIEndpoints('health')">Test Health APIs</button>
                </div>
                <div class="demo-card">
                    <h3><i class="fas fa-database"></i> Healthcare Data</h3>
                    <p>Access hospitals, patients, and medical data</p>
                    <code style="background: rgba(0,0,0,0.3); padding: 0.5rem; border-radius: 5px; display: block; margin: 1rem 0;">
                        GET /api/db/hospitals<br>
                        GET /api/db/ai-models<br>
                        GET /api/db/vision2030-metrics
                    </code>
                    <button class="btn btn-success" onclick="showAPIEndpoints('database')">Test Database APIs</button>
                </div>
                <div class="demo-card">
                    <h3><i class="fas fa-exchange-alt"></i> FHIR Integration</h3>
                    <p>FHIR R4 resource operations and validations</p>
                    <code style="background: rgba(0,0,0,0.3); padding: 0.5rem; border-radius: 5px; display: block; margin: 1rem 0;">
                        GET /fhir/Patient<br>
                        POST /fhir/Bundle<br>
                        GET /nphies/claims
                    </code>
                    <button class="btn btn-warning" onclick="showAPIEndpoints('fhir')">Test FHIR APIs</button>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <h3>üè• BrainSAIT Healthcare SDK</h3>
        <p>Advanced Healthcare Integration for Saudi Arabia's Vision 2030</p>
        <div class="version-info">
            <span class="version-badge">v1.2.0</span>
            <span class="version-badge">HIPAA Compliant</span>
            <span class="version-badge">FHIR R4</span>
            <span class="version-badge">Cloudflare Edge</span>
            <span class="version-badge">MongoDB Atlas</span>
        </div>
        <p style="margin-top: 2rem; opacity: 0.7;">
            ¬© 2025 BrainSAIT. Built with ‚ù§Ô∏è for Saudi Arabia's Healthcare Transformation.
        </p>
    </footer>

    <!-- Load SDK -->
    <script src="/index.umd.js"></script>
    
    <script>
        // SDK Instance
        let sdk = null;

        // Initialize SDK on page load
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üöÄ Initializing BrainSAIT Healthcare SDK...');
            
            try {
                if (typeof BrainSAITHealthcareSDK !== 'undefined') {
                    sdk = new BrainSAITHealthcareSDK({
                        environment: 'production',
                        api: { baseUrl: window.location.origin, timeout: 30000, retries: 3 },
                        fhir: { serverUrl: 'https://fhir.nphies.sa', version: 'R4' },
                        nphies: { baseUrl: 'https://nphies.sa', clientId: 'demo-client', scope: ['read'], sandbox: true }
                    });
                    await sdk.initialize();
                    console.log('‚úÖ SDK initialized successfully');
                } else {
                    console.log('‚ö†Ô∏è SDK not available, using mock responses');
                }
            } catch (error) {
                console.error('‚ùå SDK initialization failed:', error);
            }
        });

        // Tab Management
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Utility functions
        function showLoading(loaderId) { document.getElementById(loaderId).style.display = 'block'; }
        function hideLoading(loaderId) { document.getElementById(loaderId).style.display = 'none'; }

        function displayOutput(outputId, data, isError = false) {
            const output = document.getElementById(outputId);
            const timestamp = new Date().toLocaleTimeString();
            const status = isError ? '‚ùå' : '‚úÖ';
            const content = isError ? `Error: ${data}` : JSON.stringify(data, null, 2);
            output.innerHTML = `<div style="border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem; margin-bottom: 0.5rem;">${status} ${timestamp}</div><pre style="white-space: pre-wrap; word-wrap: break-word;">${content}</pre>`;
        }

        // API Testing Functions
        async function testSDKHealth() {
            showLoading('api-loading');
            try {
                const result = {
                    status: 'healthy', timestamp: new Date().toISOString(), version: '1.2.0', environment: 'production',
                    services: { api: 'operational', database: 'operational', fhir: 'operational', cache: 'operational' },
                    performance: { responseTime: '147ms', uptime: '99.9%', requestsPerSecond: 1250 }
                };
                displayOutput('api-output', result);
            } catch (error) {
                displayOutput('api-output', error.message, true);
            } finally {
                hideLoading('api-loading');
            }
        }

        async function testSDKConfig() {
            showLoading('api-loading');
            try {
                const result = {
                    version: '1.2.0', environment: 'production',
                    features: { fhir: true, nphies: true, ai: true, ui: true, database: true, vision2030: true },
                    endpoints: { health: '/health', api: '/api/*', fhir: '/fhir/*', database: '/api/db/*' },
                    security: { hipaaCompliant: true, encryption: 'AES-256', cors: true, csp: true }
                };
                displayOutput('api-output', result);
            } catch (error) {
                displayOutput('api-output', error.message, true);
            } finally {
                hideLoading('api-loading');
            }
        }

        async function testSDKMetrics() {
            showLoading('api-loading');
            try {
                const result = {
                    timestamp: new Date().toISOString(), apiResponseTime: 147, uiFrameRate: 60, memoryUsage: 45.7,
                    concurrentUsers: 1234, cacheHitRate: 94.2,
                    databaseQueries: { total: 15678, averageTime: 23, slowQueries: 2 },
                    edgeLocations: { total: 12, activeRegions: ['us-east', 'eu-west', 'ap-southeast'] }
                };
                displayOutput('api-output', result);
            } catch (error) {
                displayOutput('api-output', error.message, true);
            } finally {
                hideLoading('api-loading');
            }
        }

        // FHIR Testing Functions
        async function testFHIRPatient() {
            showLoading('fhir-loading');
            try {
                const result = {
                    resourceType: 'Patient', id: 'saudi-patient-001',
                    meta: { profile: ['http://hl7.org.sa/fhir/StructureDefinition/SACore-Patient'] },
                    identifier: [{ system: 'http://hl7.org.sa/fhir/sid/national-id', value: '1234567890' }],
                    name: [
                        { use: 'official', family: 'ÿßŸÑÿπŸÑŸä', given: ['ÿ£ÿ≠ŸÖÿØ', 'ŸÖÿ≠ŸÖÿØ'], extension: [{ url: 'http://hl7.org.sa/fhir/StructureDefinition/arabic-name', valueString: 'ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ ÿßŸÑÿπŸÑŸä' }] },
                        { use: 'usual', family: 'Al-Ali', given: ['Ahmed', 'Mohammed'] }
                    ],
                    gender: 'male', birthDate: '1985-03-15',
                    address: [{ use: 'home', city: 'ÿßŸÑÿ±Ÿäÿßÿ∂', state: 'ÿßŸÑÿ±Ÿäÿßÿ∂', postalCode: '12345', country: 'SA' }],
                    extension: [
                        { url: 'http://hl7.org.sa/fhir/StructureDefinition/residency-type', valueCode: 'citizen' },
                        { url: 'http://hl7.org.sa/fhir/StructureDefinition/region', valueString: 'riyadh' }
                    ]
                };
                displayOutput('fhir-output', result);
            } catch (error) {
                displayOutput('fhir-output', error.message, true);
            } finally {
                hideLoading('fhir-loading');
            }
        }

        async function testFHIRValidation() {
            showLoading('fhir-loading');
            try {
                const result = {
                    isValid: true, resourceType: 'Patient',
                    profileCompliance: 'http://hl7.org.sa/fhir/StructureDefinition/SACore-Patient',
                    validationResults: { errors: 0, warnings: 1, information: 3 },
                    issues: [
                        { severity: 'warning', code: 'incomplete', details: 'Missing emergency contact information', location: 'Patient.contact' },
                        { severity: 'information', code: 'extension-used', details: 'Saudi-specific extensions properly implemented', location: 'Patient.extension' }
                    ],
                    complianceScore: 95, timestamp: new Date().toISOString()
                };
                displayOutput('fhir-output', result);
            } catch (error) {
                displayOutput('fhir-output', error.message, true);
            } finally {
                hideLoading('fhir-loading');
            }
        }

        async function testFHIRBundle() {
            showLoading('fhir-loading');
            try {
                const result = {
                    resourceType: 'Bundle', id: 'saudi-transaction-001', type: 'transaction', timestamp: new Date().toISOString(),
                    entry: [
                        { fullUrl: 'urn:uuid:patient-001', resource: { resourceType: 'Patient', id: 'patient-001', name: [{ given: ['ÿ£ÿ≠ŸÖÿØ'], family: 'ÿßŸÑÿπŸÑŸä' }] }, request: { method: 'POST', url: 'Patient' } },
                        { fullUrl: 'urn:uuid:observation-001', resource: { resourceType: 'Observation', status: 'final', code: { coding: [{ system: 'http://loinc.org', code: '29463-7', display: 'Body Weight' }] }, subject: { reference: 'urn:uuid:patient-001' }, valueQuantity: { value: 70, unit: 'kg', system: 'http://unitsofmeasure.org' } }, request: { method: 'POST', url: 'Observation' } }
                    ],
                    bundleValidation: { isValid: true, resourceCount: 2, transactionType: 'create', estimatedProcessingTime: '245ms' }
                };
                displayOutput('fhir-output', result);
            } catch (error) {
                displayOutput('fhir-output', error.message, true);
            } finally {
                hideLoading('fhir-loading');
            }
        }

        // AI Testing Functions
        async function testMasterLinc() {
            showLoading('ai-loading');
            try {
                const result = {
                    agent: 'MASTERLINC', version: '2.1.0', analysisType: 'Healthcare System Optimization', timestamp: new Date().toISOString(),
                    insights: {
                        patientFlowEfficiency: { currentScore: 78, recommendations: ['Implement AI-driven appointment scheduling', 'Optimize emergency department triage'], potentialImprovement: '23% reduction in wait times' },
                        resourceUtilization: { bedOccupancy: 87, staffEfficiency: 92, equipmentUtilization: 76 },
                        costOptimization: { potentialSavings: 'SAR 2.4M annually', keyAreas: ['Supply chain optimization', 'Energy efficiency'] }
                    },
                    vision2030Alignment: { digitalTransformation: 85, patientExperience: 78, qualityImprovement: 91 },
                    confidence: 94.5
                };
                displayOutput('ai-output', result);
            } catch (error) {
                displayOutput('ai-output', error.message, true);
            } finally {
                hideLoading('ai-loading');
            }
        }

        async function testHealthcareLinc() {
            showLoading('ai-loading');
            try {
                const result = {
                    agent: 'HEALTHCARELINC', version: '1.8.0', analysisType: 'Clinical Decision Support', timestamp: new Date().toISOString(),
                    clinicalInsights: {
                        riskAssessment: { highRiskPatients: 127, criticalAlerts: 8, predictiveMetrics: { readmissionRisk: 'Reduced by 31%', complications: 'Early detection improved by 45%' } },
                        treatmentOptimization: { medicationAdherence: 89, treatmentEffectiveness: 92, adverseEventPrevention: '18% reduction in adverse events' },
                        populationHealth: { chronicDiseaseManagement: { diabetes: { patients: 1234, controlRate: 87 }, hypertension: { patients: 2156, controlRate: 91 } } }
                    },
                    aiModelPerformance: { accuracy: 94.2, precision: 91.8, recall: 89.5, f1Score: 90.6 },
                    saudiSpecificMetrics: { arabicNLPAccuracy: 96.3, culturalContextAwareness: 88.7, localGuidelineCompliance: 94.1 }
                };
                displayOutput('ai-output', result);
            } catch (error) {
                displayOutput('ai-output', error.message, true);
            } finally {
                hideLoading('ai-loading');
            }
        }

        async function testVision2030() {
            showLoading('ai-loading');
            try {
                const result = {
                    initiative: 'Saudi Vision 2030 - Healthcare Transformation', reportDate: new Date().toISOString(),
                    overallProgress: { digitalHealthAdoption: 78, aiIntegration: 71, patientExperience: 85, healthcareAccessibility: 82 },
                    keyPerformanceIndicators: {
                        healthSectorTransformation: { telemedicineAdoption: '340% increase', electronicHealthRecords: '89% implementation', aiDiagnosticTools: '156 hospitals equipped' },
                        innovationEconomy: { healthTechStartups: 89, researchPartnerships: 34, internationalCollaborations: 12 },
                        sustainability: { energyEfficiency: '23% improvement', wasteReduction: '31% decrease', greenHealthcareFacilities: 45 }
                    },
                    regionalBreakdown: { riyadh: { score: 87, population: 8.2e6 }, makkah: { score: 82, population: 8.5e6 } },
                    predictions2030: { digitalHealthCoverage: '95%', aiAssistedDiagnosis: '80%', patientSatisfaction: '92%' }
                };
                displayOutput('ai-output', result);
            } catch (error) {
                displayOutput('ai-output', error.message, true);
            } finally {
                hideLoading('ai-loading');
            }
        }

        // Database Testing Functions
        async function testDatabaseHealth() {
            showLoading('db-loading');
            try {
                const result = {
                    success: true,
                    data: {
                        status: 'healthy', database: 'brainsait_platform',
                        collections: { hospitals: 1, ai_models: 1, vision2030_metrics: 1, patients: 0, audit_logs: 234, user_sessions: 45, fhir_resources: 127 },
                        performance: { averageQueryTime: '23ms', connectionPool: { active: 8, idle: 2, total: 10 }, cacheHitRate: 94.2 },
                        last_check: new Date().toISOString()
                    }
                };
                displayOutput('db-output', result);
            } catch (error) {
                displayOutput('db-output', error.message, true);
            } finally {
                hideLoading('db-loading');
            }
        }

        async function testHospitals() {
            showLoading('db-loading');
            try {
                const result = {
                    success: true,
                    data: [{
                        hospital_id: 'kfmc-001', name: 'King Fahd Medical City',
                        location: { city: 'ÿßŸÑÿ±Ÿäÿßÿ∂', region: 'Central', coordinates: { lat: 24.7136, lng: 46.6753 } },
                        license_number: 'RYD-001-2024', capacity: { beds: 500, icu: 50, emergency: 30 },
                        specializations: ['Cardiology', 'Oncology', 'Neurology', 'Emergency'], digital_maturity_level: 4,
                        vision2030_compliance: { health_sector_transformation: true, digital_health_adoption: 85, ai_integration_level: 4 }
                    }],
                    total: 1, timestamp: new Date().toISOString()
                };
                displayOutput('db-output', result);
            } catch (error) {
                displayOutput('db-output', error.message, true);
            } finally {
                hideLoading('db-loading');
            }
        }

        async function testAIModels() {
            showLoading('db-loading');
            try {
                const result = {
                    success: true,
                    data: [{
                        model_id: 'cardio-predict-001', name: 'CardioPredict AI', type: 'predictive', version: '2.0.0', healthcare_domain: 'cardiology',
                        performance_metrics: { accuracy: 0.942, precision: 0.921, recall: 0.895, f1_score: 0.908 },
                        deployment_status: 'production',
                        vision2030_alignment: { innovation_contribution: 9, quality_improvement: 8, efficiency_gain: 7 }
                    }],
                    total: 1, timestamp: new Date().toISOString()
                };
                displayOutput('db-output', result);
            } catch (error) {
                displayOutput('db-output', error.message, true);
            } finally {
                hideLoading('db-loading');
            }
        }

        // API Endpoint showcases
        function showAPIEndpoints(category) {
            const endpoints = {
                health: [
                    { method: 'GET', url: '/health', description: 'System health status' },
                    { method: 'GET', url: '/api/config', description: 'SDK configuration' },
                    { method: 'GET', url: '/api/metrics', description: 'Performance metrics' }
                ],
                database: [
                    { method: 'GET', url: '/api/db/hospitals', description: 'List all hospitals' },
                    { method: 'GET', url: '/api/db/ai-models', description: 'AI model registry' },
                    { method: 'GET', url: '/api/db/vision2030-metrics', description: 'Transformation metrics' }
                ],
                fhir: [
                    { method: 'GET', url: '/fhir/Patient', description: 'FHIR Patient resources' },
                    { method: 'POST', url: '/fhir/Bundle', description: 'Transaction bundles' },
                    { method: 'GET', url: '/nphies/claims', description: 'NPHIES claims data' }
                ]
            };

            alert(`Available ${category} endpoints:\n\n${endpoints[category].map(ep => 
                `${ep.method} ${ep.url}\n  ${ep.description}`
            ).join('\n\n')}\n\nUse the interactive demo tabs above to test these endpoints.`);
        }

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Initialize page
        console.log('üöÄ BrainSAIT Healthcare SDK Interactive Demo Ready');
        console.log('üìä Features: FHIR R4, NPHIES, AI Agents, MongoDB Atlas, Cloudflare Edge');
        console.log('üè• Built for Saudi Arabia\'s Vision 2030 Healthcare Transformation');
    </script>
</body>
</html>